% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/r2p_nest.R
\name{r2p_nest}
\alias{r2p_nest}
\title{Row to Pair Nested Transformation}
\usage{
r2p_nest(data, rows2bind, by, nest_type = "dt")
}
\arguments{
\item{data}{Input 'data frame' or 'data table'
\itemize{
\item Must contain valid columns for transformation
\item Supports multiple data types
}}

\item{rows2bind}{'character' or 'numeric' column name/index for row binding
\itemize{
\item Specifies target row binding column
\item Must be a single column identifier
}}

\item{by}{'character' or 'numeric' column name/index vector
\itemize{
\item Columns used for nested pairing
\item Must specify at least one column
\item Supports multi-column transformation
}}

\item{nest_type}{Output nesting format
\itemize{
\item \code{'dt'}: Returns nested 'data table' (default)
\item \code{'df'}: Returns nested 'data frame'
}}
}
\value{
'data table' containing nested transformation results
\itemize{
\item Includes 'name' column identifying source columns
\item Contains 'data' column storing nested data structures
}
}
\description{
A flexible data transformation tool for performing row pair conversion
and nesting operations across multiple columns.
}
\details{
Advanced Transformation Mechanism:
\enumerate{
\item Input validation and preprocessing
\item Dynamic column identification
\item Flexible row pairing across specified columns
\item Nested data structure generation
}

Transformation Process:
\itemize{
\item Convert input to 'data table'
\item Reshape data from wide to long format
\item Perform column-wise nested transformation
\item Support multi-column processing
}

Index and Column Selection:
\itemize{
\item Accepts column names and numeric indices
\item Validates column existence
\item Handles single and multiple column scenarios
}
}
\note{
Key Operation Constraints:
\itemize{
\item Requires non-empty input data
\item \code{by} parameter must specify at least one column
\item Supports flexible column identification
\item Low computational overhead
}
}
\examples{
# Sample data
data <- data.frame(
  breed = c("A", "B", "A", "B"), 
  sex = c("F", "F", "M", "M"), 
  trait1 = c(1.1, 2.1, 3.5, 4.6),
  trait2 = c(5.2, 6.6, 7.3, 8.6))
data
# Method 1: Using r2p_nest() with data.table
# Combine by breed, grouping traits
r2p_nest(data, rows2bind = "breed", by = "trait1")
# Return as data frame nested structure
r2p_nest(data, rows2bind = "breed", by = c("trait1", "trait2"), nest_type = "df")
# Method 2: Using tidyr and dplyr for similar transformation
data |>
  tidyr::pivot_longer(cols = c("trait1"), names_to = "name", values_to = "value") |>
  tidyr::pivot_wider(names_from = "breed", values_from = "value") |>
  dplyr::group_nest(name)
}
\seealso{
\itemize{
\item \code{\link[data.table:melt.data.table]{data.table::melt()}} Long format conversion
\item \code{\link[data.table:dcast.data.table]{data.table::dcast()}} Wide format conversion
\item \code{\link[base:cbind]{base::rbind()}} Row binding utility
}
}
