% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/top_perc.R
\name{top_perc}
\alias{top_perc}
\title{Advanced Top Percentage Selection and Statistical Summarization}
\usage{
top_perc(data, perc, trait, by = NULL, type = "mean_sd", keep_data = FALSE)
}
\arguments{
\item{data}{A \code{data.frame} containing the source dataset for analysis
\itemize{
\item Supports various data frame-like structures
\item Automatically converts non-data frame inputs
}}

\item{perc}{Numeric vector of percentages for data selection
\itemize{
\item Range: \code{-1} to \code{1}
\item Positive values: Select top percentiles
\item Negative values: Select bottom percentiles
\item Multiple percentiles supported
}}

\item{trait}{Character string specifying the 'selection column'
\itemize{
\item Must be a valid column name in the input \code{data}
\item Used as the basis for top/bottom percentage selection
}}

\item{by}{Optional character vector for 'grouping columns'
\itemize{
\item Default is \code{NULL}
\item Enables stratified analysis
\item Allows granular percentage selection within groups
}}

\item{type}{Statistical summary type
\itemize{
\item Default: \code{"mean_sd"}
\item Controls the type of summary statistics computed
\item Supports various summary methods from \code{rstatix}
}}

\item{keep_data}{Logical flag for data retention
\itemize{
\item Default: \code{FALSE}
\item \code{TRUE}: Return both summary statistics and selected data
\item \code{FALSE}: Return only summary statistics
}}
}
\value{
Depending on \code{keep_data}:
\itemize{
\item \code{FALSE}: A \code{data.frame} with summary statistics
\item \code{TRUE}: A \code{list} with summary statistics and selected data
}
}
\description{
A sophisticated function for selecting top or bottom percentiles of data
and computing comprehensive statistical summaries with high flexibility.
}
\details{
Comprehensive Data Selection and Analysis Workflow:
\enumerate{
\item Input validation and preprocessing
\item Flexible percentage-based data selection
\item Optional group-level analysis
\item Statistical summary computation
\item Configurable output generation
}

Key Features:
\itemize{
\item Multi-percentile selection support
\item Stratified analysis capabilities
\item Robust error handling
\item Flexible statistical summarization
\item Optional data retention
}
}
\note{
Operational Considerations:
\itemize{
\item Percentage selection range: \code{-1} to \code{1}
\item Supports complex grouping strategies
\item Leverages \code{rstatix} for statistical computations
\item Handles multiple percentile selections
\item Provides detailed error messages for invalid inputs
}
}
\examples{
# Example 1: Basic usage with single trait
# This example selects the top 10\% of observations based on Petal.Width
# keep_data=TRUE returns both summary statistics and the filtered data
top_perc(iris, 
         perc = 0.1,                # Select top 10\%
         trait = c("Petal.Width"),  # Column to analyze
         keep_data = TRUE)          # Return both stats and filtered data

# Example 2: Using grouping with 'by' parameter
# This example performs the same analysis but separately for each Species
# Returns nested list with stats and filtered data for each group
top_perc(iris, 
         perc = 0.1,                # Select top 10\%
         trait = c("Petal.Width"),  # Column to analyze
         by = "Species")            # Group by Species

# Example 3: Complex example with multiple percentages and grouping variables
# Uses pipe operator and transformed data
iris |>
  # Reshape data from wide to long format for Sepal.Length and Sepal.Width
  tidyr::pivot_longer(1:2,                  # Transform first two columns
                     names_to = "names",     # New column for original column names
                     values_to = "values") |># New column for values
  # Apply top_perc function on reshaped data
  mintyr::top_perc(
    perc = c(0.1, -0.2),           # Select top 10\% AND bottom 20\%
    trait = "values",               # Analyze the 'values' column
    by = c("Species", "names"),     # Group by both Species and measurement type
    type = "mean_sd")               # Calculate mean and standard deviation

}
\seealso{
\itemize{
\item \code{\link[rstatix:get_summary_stats]{rstatix::get_summary_stats()}} Statistical summary computation
\item \code{\link[dplyr:top_n]{dplyr::top_frac()}} Percentage-based data selection
}
}
