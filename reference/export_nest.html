<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Export Nested Data Structures with Hierarchical Organization — export_nest • mintyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Export Nested Data Structures with Hierarchical Organization — export_nest"><meta property="og:description" content="Intelligently exports nested data from data.frame or data.table objects with sophisticated
grouping capabilities and flexible handling of multiple nested column types. This function
distinguishes between exportable data.frame/data.table columns and non-exportable custom object
list columns (such as rsample cross-validation splits), processing only the appropriate types
by default."><meta property="og:image" content="https://tony2015116.github.io/mintyr/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mintyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">tutorial</li>
    <li>
      <a href="../articles/get-started.html">Get started</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/tony2015116/mintyr" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
<li>
  <a href="https://github.com/tony2015116/mintyr/discussions" class="external-link">
    <span class="fa fa-users fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Export Nested Data Structures with Hierarchical Organization</h1>
    <small class="dont-index">Source: <a href="https://github.com/tony2015116/mintyr/blob/main/R/export_nest.R" class="external-link"><code>R/export_nest.R</code></a></small>
    <div class="hidden name"><code>export_nest.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Intelligently exports nested data from <code>data.frame</code> or <code>data.table</code> objects with sophisticated
grouping capabilities and flexible handling of multiple nested column types. This function
distinguishes between exportable data.frame/data.table columns and non-exportable custom object
list columns (such as rsample cross-validation splits), processing only the appropriate types
by default.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">export_nest</span><span class="op">(</span></span>
<span>  <span class="va">nest_dt</span>,</span>
<span>  group_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nest_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  export_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  file_type <span class="op">=</span> <span class="st">"txt"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-nest-dt">nest_dt<a class="anchor" aria-label="anchor" href="#arg-nest-dt"></a></dt>
<dd><p>A <code>data.frame</code> or <code>data.table</code> containing one or more nested columns.
Exportable nested columns contain <code>data.frame</code> or <code>data.table</code> objects. Non-exportable
columns contain custom objects such as <code>rsplit</code> from the rsample package or other
list-based structures. The input cannot be empty.</p></dd>


<dt id="arg-group-cols">group_cols<a class="anchor" aria-label="anchor" href="#arg-group-cols"></a></dt>
<dd><p>Optional character vector specifying column names to use for hierarchical
grouping. These columns determine the directory structure for exported files.
If <code>NULL</code> (default), automatically uses all non-nested columns as grouping variables.
Missing or invalid columns are handled gracefully with informative warnings.</p></dd>


<dt id="arg-nest-cols">nest_cols<a class="anchor" aria-label="anchor" href="#arg-nest-cols"></a></dt>
<dd><p>Optional character vector specifying which nested columns to export.
If <code>NULL</code> (default), automatically processes only columns containing <code>data.frame</code> or
<code>data.table</code> objects. Custom object list columns (e.g., <code>rsplit</code>, <code>vfold_split</code> from rsample)
are identified and reported but NOT exported. Specifying non-data.frame columns in <code>nest_cols</code>
triggers a warning and those columns are skipped.</p></dd>


<dt id="arg-export-path">export_path<a class="anchor" aria-label="anchor" href="#arg-export-path"></a></dt>
<dd><p>Character string specifying the base directory for file export.
Defaults to <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>. The function creates this directory recursively if it does not exist.</p></dd>


<dt id="arg-file-type">file_type<a class="anchor" aria-label="anchor" href="#arg-file-type"></a></dt>
<dd><p>Character string indicating export format: <code>"txt"</code> for tab-separated values
or <code>"csv"</code> for comma-separated values. Defaults to <code>"txt"</code>. Case-insensitive.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>An invisible <code>integer</code> representing the total number of files successfully exported.
Returns <code>0</code> if no exportable data.frame/data.table columns are found or if all nested
data are empty/NULL.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p><strong>Nested Column Type Detection:</strong>
The function automatically detects and categorizes nested columns into two types:</p><ul><li><p><strong>Exportable columns (Data.frame/data.table)</strong>: Columns containing <code>data.frame</code>
or <code>data.table</code> objects. These are the only columns exported to files by default.</p></li>
<li><p><strong>Non-exportable columns (Custom objects)</strong>: Columns containing other list-type objects
such as <code>rsplit</code> (rsample cross-validation splits), <code>vfold_split</code>, empty lists, or other
custom S3/S4 objects. These columns are identified and reported but cannot be exported
as txt/csv files.</p></li>
</ul><p><strong>Grouping Strategy:</strong></p><ul><li><p>When <code>group_cols = NULL</code>, all non-nested columns automatically become grouping variables.</p></li>
<li><p>Grouping columns create a hierarchical directory structure where each unique combination
of group values generates a separate subdirectory.</p></li>
<li><p>Files are organized as: <code>export_path/group1_value/group2_value/nest_col.ext</code></p></li>
<li><p>If no valid group columns exist, files export to the root <code>export_path</code>.</p></li>
</ul><p><strong>File Organization:</strong></p><ul><li><p>One file is generated per exportable nested column per row
(e.g., row 1 with 2 data.frame columns generates 2 files).</p></li>
<li><p>Only data.frame/data.table nested columns are written; custom object columns are skipped.</p></li>
<li><p>Filenames follow the pattern: <code>{nested_column_name}.{file_type}</code> (e.g., <code>data.txt</code>, <code>results.csv</code>).</p></li>
<li><p>Files are written using <code><a href="https://rdatatable.gitlab.io/data.table/reference/fwrite.html" class="external-link">data.table::fwrite()</a></code> for efficient I/O.</p></li>
<li><p>Empty or <code>NULL</code> nested data are silently skipped without interrupting the export process.</p></li>
</ul><p><strong>Error Handling:</strong></p><ul><li><p>Parameter validation occurs early, with informative error messages for invalid inputs.</p></li>
<li><p>Missing group columns trigger warnings but do not halt execution.</p></li>
<li><p>Custom object columns are identified and reported when <code>nest_cols = NULL</code>,
allowing users to be aware of non-exportable data.</p></li>
<li><p>Invalid or non-data.frame nested columns in <code>nest_cols</code> are skipped with warnings.</p></li>
<li><p>Individual row export failures generate warnings but continue processing remaining rows.</p></li>
</ul><p><strong>Data.table Requirement:</strong>
The data.table package is required. The function automatically checks for its availability
and converts input data to <code>data.table</code> format if necessary.</p>
    </div>
    <div id="note">
    <h2>Note</h2>

<ul><li><p>The function does not modify the input <code>nest_dt</code>; it is non-destructive.</p></li>
<li><p>Empty input data.frames trigger an error; use <code>if (nrow(nest_dt) &gt; 0)</code> to validate
input first.</p></li>
<li><p>Custom object columns detected when <code>nest_cols = NULL</code> are reported as informational
messages; no error occurs.</p></li>
<li><p>Attempting to export custom object columns via <code>nest_cols</code> will skip them with a warning.</p></li>
<li><p>All messages and warnings are printed to console; capture output programmatically
if needed via <code><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output()</a></code> or similar functions.</p></li>
<li><p>File paths are constructed using <code><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path()</a></code>, ensuring cross-platform compatibility.</p></li>
</ul></div>
    <div id="dependencies">
    <h2>Dependencies</h2>


<p>Requires the <code>data.table</code> package for efficient data manipulation and I/O operations.</p>
    </div>
    <div id="limitations">
    <h2>Limitations</h2>


<p>Custom object columns (e.g., <code>rsplit</code> from rsample, cross-validation folds) cannot be
exported as txt/csv files because they are not standard data structures. These columns are
identified automatically and reported to the console. If you need to export rsample split
information, consider extracting the indices or data using rsample utility functions first.</p>
    </div>
    <div id="use-cases">
    <h2>Use Cases</h2>


<ul><li><p>Exporting structured data from tidymodels workflows that also contain cross-validation splits</p></li>
<li><p>Batch exporting multiple nested data.frame columns with automatic hierarchical organization</p></li>
<li><p>Creating organized file hierarchies based on grouping variables (e.g., by experiment,
participant, or time period)</p></li>
<li><p>Integration with reproducible research workflows</p></li>
</ul></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="https://rdatatable.gitlab.io/data.table/reference/fwrite.html" class="external-link">fwrite</a></code> for details on file writing,</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example 1: Basic nested data export workflow</span></span></span>
<span class="r-in"><span><span class="co"># Step 1: Create nested data structure</span></span></span>
<span class="r-in"><span><span class="va">dt_nest</span> <span class="op">&lt;-</span> <span class="fu"><a href="w2l_nest.html">w2l_nest</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">iris</span>,              <span class="co"># Input iris dataset</span></span></span>
<span class="r-in"><span>  cols2l <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,             <span class="co"># Columns to be nested</span></span></span>
<span class="r-in"><span>  by <span class="op">=</span> <span class="st">"Species"</span>            <span class="co"># Grouping variable</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Step 2: Export nested data to files</span></span></span>
<span class="r-in"><span><span class="fu">export_nest</span><span class="op">(</span></span></span>
<span class="r-in"><span>  nest_dt <span class="op">=</span> <span class="va">dt_nest</span>,        <span class="co"># Input nested data.table</span></span></span>
<span class="r-in"><span>  nest_cols <span class="op">=</span> <span class="st">"data"</span>,       <span class="co"># Column containing nested data</span></span></span>
<span class="r-in"><span>  group_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"Species"</span><span class="op">)</span>  <span class="co"># Columns to create directory structure</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Total files exported: 6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 6</span>
<span class="r-in"><span><span class="co"># Returns the number of files created</span></span></span>
<span class="r-in"><span><span class="co"># Creates directory structure: tempdir()/name/Species/data.txt</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check exported files</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,         <span class="co"># Default export directory</span></span></span>
<span class="r-in"><span>  pattern <span class="op">=</span> <span class="st">"txt"</span>,          <span class="co"># File type pattern to search</span></span></span>
<span class="r-in"><span>  recursive <span class="op">=</span> <span class="cn">TRUE</span>          <span class="co"># Search in subdirectories</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Sepal.Length/setosa/data.txt"     "Sepal.Length/versicolor/data.txt"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "Sepal.Length/virginica/data.txt"  "Sepal.Width/setosa/data.txt"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "Sepal.Width/versicolor/data.txt"  "Sepal.Width/virginica/data.txt"  </span>
<span class="r-in"><span><span class="co"># Returns list of created files and their paths</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Clean up exported files</span></span></span>
<span class="r-in"><span><span class="va">files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,         <span class="co"># Default export directory</span></span></span>
<span class="r-in"><span>  pattern <span class="op">=</span> <span class="st">"txt"</span>,          <span class="co"># File type pattern to search</span></span></span>
<span class="r-in"><span>  recursive <span class="op">=</span> <span class="cn">TRUE</span>,         <span class="co"># Search in subdirectories</span></span></span>
<span class="r-in"><span>  full.names <span class="op">=</span> <span class="cn">TRUE</span>         <span class="co"># Return full file paths</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">files</span><span class="op">)</span>          <span class="co"># Remove all exported files</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE TRUE TRUE TRUE TRUE TRUE</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Guo Meng.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

