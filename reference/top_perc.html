<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Select Top Percentage of Data and Compute Summary Statistics — top_perc • mintyr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Select Top Percentage of Data and Compute Summary Statistics — top_perc"><meta property="og:description" content="The top_perc function selects the top percentage of data based on a specified trait and computes summary statistics.
It allows for grouping by additional columns and offers flexibility in the type of statistics calculated.
The function can also retain the selected data if needed."><meta property="og:image" content="https://tony2015116.github.io/mintyr/logo.svg"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mintyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">tutorial</li>
    <li>
      <a href="../articles/get-started.html">Get started</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/index.html">More articles...</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Select Top Percentage of Data and Compute Summary Statistics</h1>

    <div class="hidden name"><code>top_perc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>top_perc</code> function selects the top percentage of data based on a specified trait and computes summary statistics.
It allows for grouping by additional columns and offers flexibility in the type of statistics calculated.
The function can also retain the selected data if needed.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">top_perc</span><span class="op">(</span><span class="va">data</span>, <span class="va">perc</span>, <span class="va">trait</span>, by <span class="op">=</span> <span class="cn">NULL</span>, type <span class="op">=</span> <span class="st">"mean_sd"</span>, keep_data <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>data.frame. The input data frame.</p></dd>


<dt id="arg-perc">perc<a class="anchor" aria-label="anchor" href="#arg-perc"></a></dt>
<dd><p>numeric vector. A vector of percentages to select the top data. Each element should be a numeric value between -1 and 1.</p></dd>


<dt id="arg-trait">trait<a class="anchor" aria-label="anchor" href="#arg-trait"></a></dt>
<dd><p>character. The name of the column in <code>data</code> on which to base the selection.</p></dd>


<dt id="arg-by">by<a class="anchor" aria-label="anchor" href="#arg-by"></a></dt>
<dd><p>character vector, optional. The names of the columns to group by. Default is NULL.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>type of summary statistics. Possible values include: <code>"full",
"common", "robust",  "five_number", "mean_sd", "mean_se", "mean_ci",
"median_iqr", "median_mad", "quantile", "mean", "median",  "min", "max"</code></p></dd>


<dt id="arg-keep-data">keep_data<a class="anchor" aria-label="anchor" href="#arg-keep-data"></a></dt>
<dd><p>logical, optional. If TRUE, the function returns both the summary statistics and the selected top data. Default is FALSE.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list or data frame:</p><ul><li><p>If <code>keep_data</code> is FALSE, a data frame with summary statistics.</p></li>
<li><p>If <code>keep_data</code> is TRUE, a list where each element is a list containing summary statistics (<code>stat</code>) and the selected top data (<code>data</code>).</p></li>
</ul></div>
    <div id="note">
    <h2>Note</h2>

<ul><li><p>The <code>perc</code> parameter accepts values between -1 and 1. Positive values select the top percentage, while negative values select the bottom percentage.</p></li>
<li><p>The function performs initial checks to ensure required arguments are provided and valid.</p></li>
<li><p>Grouping by additional columns (<code>by</code>) is optional and allows for more granular analysis.</p></li>
<li><p>The <code>type</code> parameter specifies the type of summary statistics to compute, with "mean_sd" as the default.</p></li>
<li><p>If <code>keep_data</code> is set to TRUE, the function will return both the summary statistics and the selected top data for each percentage.</p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Example 1: Basic usage with single trait</span></span></span>
<span class="r-in"><span><span class="co"># This example selects the top 10% of observations based on Petal.Width</span></span></span>
<span class="r-in"><span><span class="co"># keep_data=TRUE returns both summary statistics and the filtered data</span></span></span>
<span class="r-in"><span><span class="fu">top_perc</span><span class="op">(</span><span class="va">iris</span>, </span></span>
<span class="r-in"><span>         perc <span class="op">=</span> <span class="fl">0.1</span>,                <span class="co"># Select top 10%</span></span></span>
<span class="r-in"><span>         trait <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Petal.Width"</span><span class="op">)</span>,  <span class="co"># Column to analyze</span></span></span>
<span class="r-in"><span>         keep_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>          <span class="co"># Return both stats and filtered data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Petal.Width_0.1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Petal.Width_0.1$stat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1 × 5</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   variable        n  mean    sd top_perc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> Petal.Width    17  2.34   0.1 10%     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Petal.Width_0.1$data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           6.3         3.3          6.0         2.5 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           6.5         3.0          5.8         2.2 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           7.2         3.6          6.1         2.5 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           5.8         2.8          5.1         2.4 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           6.4         3.2          5.3         2.3 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           7.7         3.8          6.7         2.2 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7           7.7         2.6          6.9         2.3 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8           6.9         3.2          5.7         2.3 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9           6.4         2.8          5.6         2.2 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10          7.7         3.0          6.1         2.3 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11          6.3         3.4          5.6         2.4 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12          6.7         3.1          5.6         2.4 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13          6.9         3.1          5.1         2.3 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14          6.8         3.2          5.9         2.3 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15          6.7         3.3          5.7         2.5 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16          6.7         3.0          5.2         2.3 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17          6.2         3.4          5.4         2.3 virginica</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Using grouping with 'by' parameter</span></span></span>
<span class="r-in"><span><span class="co"># This example performs the same analysis but separately for each Species</span></span></span>
<span class="r-in"><span><span class="co"># Returns nested list with stats and filtered data for each group</span></span></span>
<span class="r-in"><span><span class="fu">top_perc</span><span class="op">(</span><span class="va">iris</span>, </span></span>
<span class="r-in"><span>         perc <span class="op">=</span> <span class="fl">0.1</span>,                <span class="co"># Select top 10%</span></span></span>
<span class="r-in"><span>         trait <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Petal.Width"</span><span class="op">)</span>,  <span class="co"># Column to analyze</span></span></span>
<span class="r-in"><span>         by <span class="op">=</span> <span class="st">"Species"</span><span class="op">)</span>            <span class="co"># Group by Species</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 6</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Species    variable        n  mean    sd top_perc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> setosa     Petal.Width     9 0.433 0.071 10%     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> versicolor Petal.Width     5 1.66  0.089 10%     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> virginica  Petal.Width     6 2.45  0.055 10%     </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: Complex example with multiple percentages and grouping variables</span></span></span>
<span class="r-in"><span><span class="co"># Uses pipe operator and transformed data</span></span></span>
<span class="r-in"><span><span class="va">iris</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="co"># Reshape data from wide to long format for Sepal.Length and Sepal.Width</span></span></span>
<span class="r-in"><span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>,                  <span class="co"># Transform first two columns</span></span></span>
<span class="r-in"><span>                     names_to <span class="op">=</span> <span class="st">"names"</span>,     <span class="co"># New column for original column names</span></span></span>
<span class="r-in"><span>                     values_to <span class="op">=</span> <span class="st">"values"</span><span class="op">)</span> <span class="op">|&gt;</span><span class="co"># New column for values</span></span></span>
<span class="r-in"><span>  <span class="co"># Apply top_perc function on reshaped data</span></span></span>
<span class="r-in"><span>  <span class="fu">mintyr</span><span class="fu">::</span><span class="fu">top_perc</span><span class="op">(</span></span></span>
<span class="r-in"><span>    perc <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="op">-</span><span class="fl">0.2</span><span class="op">)</span>,           <span class="co"># Select top 10% AND bottom 20%</span></span></span>
<span class="r-in"><span>    trait <span class="op">=</span> <span class="st">"values"</span>,               <span class="co"># Analyze the 'values' column</span></span></span>
<span class="r-in"><span>    by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Species"</span>, <span class="st">"names"</span><span class="op">)</span>,     <span class="co"># Group by both Species and measurement type</span></span></span>
<span class="r-in"><span>    type <span class="op">=</span> <span class="st">"mean_sd"</span><span class="op">)</span>               <span class="co"># Calculate mean and standard deviation</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 12 × 7</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Species    names        variable     n  mean    sd top_perc</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> setosa     Sepal.Length values       5  5.64 0.134 10%     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> setosa     Sepal.Width  values       6  4.08 0.194 10%     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> versicolor Sepal.Length values       6  6.8  0.126 10%     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> versicolor Sepal.Width  values       5  3.26 0.089 10%     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> virginica  Sepal.Length values       5  7.74 0.089 10%     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> virginica  Sepal.Width  values       5  3.6  0.2   10%     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> setosa     Sepal.Length values      11  4.53 0.135 -20%    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> setosa     Sepal.Width  values      12  2.97 0.219 -20%    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> versicolor Sepal.Length values      11  5.28 0.244 -20%    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> versicolor Sepal.Width  values      13  2.35 0.151 -20%    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">11</span> virginica  Sepal.Length values      11  5.79 0.336 -20%    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">12</span> virginica  Sepal.Width  values      11  2.56 0.15  -20%    </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Guo Meng.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

